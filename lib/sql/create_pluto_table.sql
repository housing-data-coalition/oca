-- schema for 23v1.2
CREATE TABLE pluto (
	borough varchar(2) NULL,
	block int4 NULL,
	lot int4 NULL,
	cd int4 NULL,
	bct2020 int4 NULL,
	bctcb2020 int8 NULL,
	ct2010 numeric(10,2) NULL,
	cb2010 int4 NULL,
	schooldist int4 NULL,
	council int4 NULL,
	zipcode int4 NULL,
	firecomp varchar(4) NULL,
	policeprct int4 NULL,
	healthcenterdistrict int4 NULL,
	healtharea int4 NULL,
	sanitboro int4 NULL,
	sanitdistrict int4 NULL,
	sanitsub varchar(2) NULL,
	address text NULL,
	zonedist1 varchar(10) NULL,
	zonedist2 varchar(10) NULL,
	zonedist3 varchar(10) NULL,
	zonedist4 varchar(10) NULL,
	overlay1 varchar(4) NULL,
	overlay2 varchar(4) NULL,
	spdist1 text NULL,
	spdist2 text NULL,
	spdist3 text NULL,
	ltdheight varchar(5) NULL,
	splitzone varchar(1) NULL,
	bldgclass varchar(2) NULL,
	landuse int4 NULL,
	easements int4 NULL,
	ownertype varchar(1) NULL,
	ownername text NULL,
	lotarea int4 NULL,
	bldgarea int4 NULL,
	comarea int4 NULL,
	resarea int4 NULL,
	officearea int4 NULL,
	retailarea int4 NULL,
	garagearea int4 NULL,
	strgearea int4 NULL,
	factryarea int4 NULL,
	otherarea int4 NULL,
	areasource int4 NULL,
	numbldgs int4 NULL,
	numfloors float8 NULL,
	unitsres int4 NULL,
	unitstotal int4 NULL,
	lotfront float8 NULL,
	lotdepth float8 NULL,
	bldgfront float8 NULL,
	bldgdepth float8 NULL,
	ext varchar(2) NULL,
	proxcode int4 NULL,
	irrlotcode varchar(1) NULL,
	lottype int4 NULL,
	bsmtcode int4 NULL,
	assessland float8 NULL,
	assesstot float8 NULL,
	exempttot float8 NULL,
	yearbuilt int4 NULL,
	yearalter1 int4 NULL,
	yearalter2 int4 NULL,
	histdist text NULL,
	landmark text NULL,
	builtfar float8 NULL,
	residfar float8 NULL,
	commfar float8 NULL,
	facilfar float8 NULL,
	borocode int4 NULL,
	bbl text NULL,
	condono int4 NULL,
	tract2010 int4 NULL,
	xcoord int4 NULL,
	ycoord int4 NULL,
	zonemap varchar(3) NULL,
	zmcode varchar(1) NULL,
	sanborn varchar(8) NULL,
	taxmap int4 NULL,
	edesignum varchar(5) NULL,
	appbbl float8 NULL,
	appdate varchar(10) NULL,
	plutomapid int4 NULL,
	firm07_flag int4 NULL,
	pfirm15_flag int4 NULL,
	"version" varchar(6) NULL,
	dcpedited varchar(1) NULL,
	latitude float8 NULL,
	longitude float8 NULL,
	notes text NULL
);

drop view if exists oca_addresses_with_bbl cascade;
drop view if exists oca_addresses_with_ct cascade;
alter table pluto alter column bbl TYPE TEXT USING (round(bbl::numeric,0));